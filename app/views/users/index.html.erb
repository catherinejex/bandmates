<%= render 'shared/navbar' %>

<div class="container mt-4">
  <div class="search-query">
    <%= form_tag users_path, class: "filter-form", method: :get do %>
      <%= text_field_tag :location,
      params[:location],
      class: "filter-input",
      placeholder: "Location"
      %>
      <%= text_field_tag :genres,
      params[:genres],
      class: "filter-input",
      placeholder: "Genre"
      %>
      <%= text_field_tag :instruments,
      params[:instruments],
      class: "filter-input",
      placeholder: "Instrument"
      %>
      <%= submit_tag "Search", class: "filter-submit-button" %>
    <% end %>
  </div>
  <div class='cards'>
    <% @users.each do |user| %>
      <div class="card-user">
        <a class='show-link' href="<%= user_path(user) %>">
          <%= cl_image_tag user.photos.first.key, class:'card-image' %>
        </a>
        <div class="card-body">
          <div class="card-info">
            <p style="font-size:16px; font-family: Lobster, cursive; font-weight:bold"><%= user.username %></p>
            <p> <i class="fa fa-map-pin" id="pin"></i> <%= user.location %></p>
            <p> <span style="font-size: 18px;">‚ô™</span> <i class="fas fa-guitar"></i> <%= user.instruments.join(', ') %></p>
            <p> <span style="font-size:10px;">üè∑Ô∏è</span> <%= user.genres.join(', ') %></p>
            <% if (favourite = @favourites.find_by(liked: user)).present? %>
              <%= link_to favourite_path(user),remote: true, method: :delete do%>
              <div class="liked-note"><i class="fa fa-music"></i></div>
              <%end %>
            <% else %>
              <%= link_to user_favourites_path(user),remote: true, method: :post do %>
                <div class="music-note">
                  <i class="fa fa-music"></i>
                </div>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
<%= render 'shared/footer' %>
